<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus AI Chat</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Variables */
        :root {
            --primary-color: #0099ff;
            --secondary-color: #F5F5F5;
            --text-color: #333;
            --light-text: #666;
            --bg-color: #EDEDED;
            --white: #fff;
            --border-color: #ddd;
            --user-msg-color: #e1f5fe;
            --ai-msg-color: var(--white);
            --shadow: 0 2px 10px rgba(0, 153, 255, 0.15);
            --border-radius: 8px;
            --chat-font-size: 14px; /* Default font size for chat */
            --tech-blue: #0099ff;
            --tech-dark-blue: #006bb3;
            --tech-light-blue: #e1f5fe;
            --tech-grey: #f0f0f0;
            /* Sci-fi theme additions */
            --neon-blue: #00c3ff;
            --neon-purple: #9d00ff;
            --neon-cyan: #00fff2;
            --tech-bg-dark: #121a29;
            --tech-bg-light: #f0f4ff;
            --hologram-blue: rgba(0, 195, 255, 0.1);
            --glow-shadow: 0 0 10px rgba(0, 195, 255, 0.4);
            --matrix-green: #00ff41;
            --cyber-yellow: #ffdd00;
            --digital-pattern: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231e88e5' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        /* Dark theme */
        [data-theme="dark"] {
            --primary-color: #0099ff;
            --secondary-color: #2A2A2A;
            --text-color: #E0E0E0;
            --light-text: #BBBBBB;
            --bg-color: #1A1A1A;
            --white: #2A2A2A;
            --border-color: #444;
            --user-msg-color: #004d80;
            --ai-msg-color: #3A3A3A;
            --shadow: 0 2px 10px rgba(0, 153, 255, 0.3);
            /* Sci-fi dark theme */
            --hologram-blue: rgba(0, 195, 255, 0.15);
            --tech-bg-dark: #131c2e;
        }
        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            overflow: hidden;
            background-image:
                radial-gradient(var(--border-color) 1px, transparent 1px),
                var(--digital-pattern);
            background-size: 25px 25px, 60px 60px;
            position: relative;
        }
        /* Tech circuit lines overlay */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: linear-gradient(to right, transparent 49.5%, rgba(0, 153, 255, 0.03) 50%, transparent 50.5%),
                              linear-gradient(to bottom, transparent 49.5%, rgba(0, 153, 255, 0.03) 50%, transparent 50.5%);
            background-size: 40px 40px;
            z-index: -1;
        }
        /* Hide scrollbars but keep scrolling functionality */
        .chat-list, .chat-area, .dropdown-menu, .message-input {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        .chat-list::-webkit-scrollbar,
        .chat-area::-webkit-scrollbar,
        .dropdown-menu::-webkit-scrollbar,
        .message-input::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        /* Sidebar */
        .sidebar {
            width: 280px;
            background-color: var(--white);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: all 0.3s ease;
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 10;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
            background-image: linear-gradient(145deg, rgba(0, 195, 255, 0.03) 0%, transparent 100%);
            border-right: 1px solid rgba(0, 153, 255, 0.1);
        }
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--secondary-color);
            position: relative;
            overflow: hidden;
            background-image: linear-gradient(90deg, rgba(0, 153, 255, 0.05) 0%, transparent 100%);
        }
        .sidebar-header::before {
            content: "";
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--neon-blue) 0%, transparent 70%);
            opacity: 0.3;
            top: -50px;
            left: -50px;
            animation: pulse-glow 8s infinite alternate;
            pointer-events: none;
        }
        .sidebar-title {
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 0.5px;
            position: relative;
            text-shadow: 0 0 5px rgba(0, 153, 255, 0.3);
        }
        .sidebar-title a {
            text-decoration: none;
            color: inherit;
        }
        .sidebar-title a span {
            position: relative;
        }
        .sidebar-title a span::after {
            content: "";
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
            animation: scan-line 3s infinite;
        }
        @keyframes scan-line { 0% { width: 0; left: 0; } 50% { width: 100%; } 100% { width: 0; left: 100%; } }
        @keyframes pulse-glow { 0%, 100% { opacity: 0.1; } 50% { opacity: 0.3; } }
        .theme-toggle, .clear-all-btn { background: none; border: none; color: var(--light-text); cursor: pointer; font-size: 14px; transition: all 0.3s ease; position: relative; z-index: 1; }
        .theme-toggle { margin-right: 8px; }
        .theme-toggle:hover, .clear-all-btn:hover { color: var(--neon-blue); text-shadow: 0 0 5px var(--neon-blue); }
        .search-container { padding: 15px 15px 5px 15px; position: relative; }
        .search-input { width: 100%; padding: 8px 30px 8px 10px; border: 1px solid var(--border-color); border-radius: var(--border-radius); background-color: var(--secondary-color); color: var(--text-color); transition: all 0.3s ease; background-image: linear-gradient(to right, rgba(0, 153, 255, 0.03), transparent); }
        .search-input:focus { border-color: var(--neon-blue); outline: none; box-shadow: 0 0 0 2px rgba(0, 195, 255, 0.15); }
        .search-icon { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); color: var(--light-text); font-size: 14px; }
        .new-chat-btn { margin: 5px 15px 15px 15px; padding: 10px; background-color: var(--tech-blue); color: var(--white); border: none; border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 500; transition: all 0.3s ease; position: relative; overflow: hidden; z-index: 1; box-shadow: 0 0 10px rgba(0, 153, 255, 0.2); }
        .new-chat-btn::before { content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; background: linear-gradient(45deg, var(--neon-blue), var(--tech-blue), var(--neon-cyan)); z-index: -1; border-radius: var(--border-radius); opacity: 0; transition: opacity 0.3s ease; }
        .new-chat-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 153, 255, 0.3); }
        .new-chat-btn:hover::before { opacity: 1; }
        .new-chat-btn:active { transform: translateY(0); }
        .new-chat-btn span, .new-chat-btn i { position: relative; z-index: 2; }
        .chat-list { flex: 1; overflow-y: auto; padding: 10px; }
        .chat-item { padding: 12px; margin-bottom: 5px; border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; position: relative; transition: all 0.3s ease; border: 1px solid transparent; }
        .chat-item:hover { background-color: var(--secondary-color); border-color: rgba(0, 153, 255, 0.1); box-shadow: 0 2px 8px rgba(0, 153, 255, 0.1); }
        .chat-item.active { background-color: var(--tech-light-blue); border-left: 2px solid var(--neon-blue); box-shadow: inset 0 0 8px rgba(0, 153, 255, 0.1); }
        .chat-item-icon { margin-right: 12px; width: 32px; height: 32px; border-radius: var(--border-radius); display: flex; align-items: center; justify-content: center; background-color: var(--tech-grey); color: var(--text-color); overflow: hidden; position: relative; }
        .chat-item-icon::after { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 3s infinite; }
        @keyframes shine { 0% { left: -100%; } 20% { left: 100%; } 100% { left: 100%; } }
        .chat-item-icon img { width: 100%; height: 100%; border-radius: var(--border-radius); object-fit: cover; }
        .chat-item-title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 15px; }
        .chat-item-actions { display: flex; gap: 8px; }
        .chat-item-pin, .chat-item-delete { color: #999; visibility: hidden; padding: 4px; font-size: 12px; transition: all 0.3s ease; }
        .chat-item:hover .chat-item-pin, .chat-item:hover .chat-item-delete { visibility: visible; }
        .chat-item-pin.pinned { visibility: visible; color: var(--neon-blue); text-shadow: 0 0 3px rgba(0, 195, 255, 0.5); }
        .chat-item-pin:hover { color: var(--neon-blue); transform: scale(1.1); }
        .chat-item-delete:hover { color: #ff5252; transform: scale(1.1); }
        /* Main content */
        .main-content { flex: 1; display: flex; flex-direction: column; height: 100%; width: 100%; margin-left: 0; transition: margin-left 0.3s ease; background-image: linear-gradient(120deg, rgba(0, 153, 255, 0.02) 0%, transparent 100%); }
        body:not(.sidebar-hidden) .main-content { margin-left: 280px; }
        /* Header */
        .header { padding: 15px; background-color: var(--white); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; box-shadow: var(--shadow); z-index: 5; background-image: linear-gradient(to right, rgba(0, 153, 255, 0.05) 0%, transparent 70%); position: relative; }
        .header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); opacity: 0.5; }
        .model-selection { flex: 1; display: flex; justify-content: center; align-items: center; gap: 15px; }
        .sidebar-toggle-btn { background: none; border: none; cursor: pointer; font-size: 16px; color: var(--light-text); margin-right: 10px; transition: all 0.3s ease; position: relative; }
        .sidebar-toggle-btn:hover { color: var(--neon-blue); text-shadow: 0 0 5px rgba(0, 195, 255, 0.5); }
        .dropdown { position: relative; display: inline-block; }
        .dropdown-toggle { background-color: var(--white); color: var(--text-color); padding: 8px 15px; border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; gap: 5px; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .dropdown-toggle::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 1px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); transform: scaleX(0); transform-origin: center; transition: transform 0.3s ease; }
        .dropdown-toggle:hover { border-color: var(--neon-blue); box-shadow: 0 0 0 2px rgba(0, 195, 255, 0.1); }
        .dropdown-toggle:hover::after { transform: scaleX(1); }
        .dropdown-menu { position: absolute; top: 100%; left: 0; min-width: 200px; background-color: var(--white); border: 1px solid var(--border-color); border-radius: var(--border-radius); box-shadow: var(--shadow), 0 0 15px rgba(0, 153, 255, 0.1); z-index: 999; display: none; padding: 5px 0; max-height: 400px; overflow-y: auto; backdrop-filter: blur(10px); border: 1px solid rgba(0, 153, 255, 0.2); }
        .dropdown-menu.show { display: block; animation: fade-in 0.2s ease; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .dropdown-group { padding: 5px 10px; font-weight: bold; color: var(--neon-blue); border-bottom: 1px solid var(--border-color); margin-top: 5px; font-size: 0.85em; text-shadow: 0 0 3px rgba(0, 195, 255, 0.3); }
        .dropdown-item { padding: 8px 15px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .dropdown-item::before { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 3px; background-color: var(--neon-blue); transform: scaleY(0); transition: transform 0.2s ease; }
        .dropdown-item:hover { background-color: var(--tech-light-blue); }
        .dropdown-item:hover::before { transform: scaleY(1); }
        .settings-btn, .font-size-btn { background: none; border: none; cursor: pointer; font-size: 16px; color: var(--light-text); margin-left: 10px; transition: all 0.3s ease; position: relative; }
        .settings-btn:hover, .font-size-btn:hover { color: var(--neon-blue); text-shadow: 0 0 5px rgba(0, 195, 255, 0.5); transform: rotate(15deg); }
        .font-size-controls { display: flex; align-items: center; gap: 5px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal.show { display: flex; animation: modal-in 0.3s ease; }
        @keyframes modal-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .modal-content { background-color: var(--white); border-radius: var(--border-radius); padding: 20px; width: 500px; max-width: 90%; box-shadow: var(--shadow), 0 0 30px rgba(0, 153, 255, 0.15); border: 1px solid rgba(0, 153, 255, 0.2); position: relative; overflow: hidden; }
        .modal-content::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--neon-blue), var(--neon-cyan), var(--neon-blue)); z-index: 1; }
        .modal-content::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at top right, rgba(0, 195, 255, 0.1), transparent 70%); pointer-events: none; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; position: relative; }
        .modal-title { font-size: 18px; font-weight: bold; color: var(--neon-blue); text-shadow: 0 0 5px rgba(0, 195, 255, 0.3); }
        .close-modal { background: none; border: none; cursor: pointer; font-size: 14px; color: var(--light-text); transition: all 0.3s ease; z-index: 2; }
        .close-modal:hover { color: var(--neon-blue); text-shadow: 0 0 5px rgba(0, 195, 255, 0.5); transform: rotate(90deg); }
        .modal-body { margin-bottom: 15px; position: relative; z-index: 2; }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--tech-dark-blue); position: relative; display: inline-block; }
        .form-label::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 1px; background: linear-gradient(90deg, var(--neon-blue), transparent); }
        .form-control { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--border-radius); resize: vertical; background-color: var(--white); color: var(--text-color); transition: all 0.3s ease; background-image: linear-gradient(to bottom, rgba(0, 153, 255, 0.02), transparent); }
        .form-control:focus { border-color: var(--neon-blue); outline: none; box-shadow: 0 0 0 2px rgba(0, 195, 255, 0.1), inset 0 0 10px rgba(0, 153, 255, 0.05); }
        .prompt-examples { margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px; }
        .prompt-example { font-size: 12px; padding: 5px 10px; background-color: var(--tech-grey); border-radius: var(--border-radius); cursor: pointer; border: 1px solid var(--border-color); transition: all 0.3s ease; position: relative; overflow: hidden; }
        .prompt-example::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to right, transparent, rgba(0, 195, 255, 0.1), transparent); transform: translateX(-100%); transition: transform 0.5s ease; }
        .prompt-example:hover { background-color: var(--tech-light-blue); border-color: var(--neon-blue); box-shadow: 0 0 5px rgba(0, 195, 255, 0.3); transform: translateY(-2px); }
        .prompt-example:hover::before { transform: translateX(100%); }
        .modal-footer { display: flex; justify-content: flex-end; gap: 10px; position: relative; z-index: 2; }
        .btn { padding: 8px 15px; border-radius: var(--border-radius); cursor: pointer; border: none; font-weight: 500; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .btn::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 60%); opacity: 0; transform: scale(0.1); transition: transform 0.5s, opacity 0.5s; }
        .btn:hover { transform: translateY(-2px); }
        .btn:hover::after { opacity: 1; transform: scale(1); }
        .btn:active { transform: translateY(0); }
        .btn-secondary { background-color: var(--secondary-color); color: var(--text-color); border: 1px solid var(--border-color); }
        .btn-secondary:hover { background-color: var(--tech-grey); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        .btn-primary { background-color: var(--tech-blue); color: var(--white); box-shadow: 0 0 10px rgba(0, 153, 255, 0.2); }
        .btn-primary:hover { background-color: var(--tech-dark-blue); box-shadow: 0 0 15px rgba(0, 153, 255, 0.3); }
        /* Chat area */
        .chat-area { flex: 1; overflow-y: auto; padding: 10px; background-color: var(--bg-color); background-image: linear-gradient(0deg, rgba(0, 153, 255, 0.02), transparent), var(--digital-pattern); }
        .message-time { text-align: center; margin: 10px 0; color: var(--light-text); font-size: 12px; padding: 2px 12px; display: inline-block; background-color: rgba(0, 0, 0, 0.05); border-radius: 10px; border: 1px solid rgba(0, 153, 255, 0.1); box-shadow: 0 0 8px rgba(0, 153, 255, 0.05); backdrop-filter: blur(2px); }
        .message { margin-bottom: 15px; display: flex; align-items: flex-start; }
        .message-user { flex-direction: row-reverse; }
        .message-avatar { width: 36px; height: 36px; border-radius: 6px; margin: 0 12px; overflow: hidden; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 0 5px rgba(0, 153, 255, 0.2); position: relative; z-index: 1; }
        .message-avatar::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(0, 195, 255, 0.2), transparent); z-index: -1; }
        .message-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .message-bubble { max-width: 70%; padding: 10px 15px; border-radius: 12px; position: relative; font-size: var(--chat-font-size); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05), 0 0 5px rgba(0, 153, 255, 0.05); background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.05), transparent); backdrop-filter: blur(5px); }
        .message-user .message-bubble { background-color: var(--user-msg-color); border-top-right-radius: 0; border: 1px solid rgba(0, 153, 255, 0.15); }
        .message-ai .message-bubble { background-color: var(--ai-msg-color); border-top-left-radius: 0; border: 1px solid rgba(0, 153, 255, 0.1); }
        .message-ai .message-bubble::before { content: ''; position: absolute; top: -2px; left: -2px; width: calc(100% + 4px); height: calc(100% + 4px); background: linear-gradient(45deg, var(--neon-blue), transparent, var(--neon-cyan)); border-radius: inherit; z-index: -1; opacity: 0.3; animation: borderflow 3s infinite alternate; filter: blur(5px); }
        @keyframes borderflow { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        .message-text { word-wrap: break-word; white-space: pre-wrap; }
        .message-text code { font-family: 'Courier New', monospace; background-color: rgba(0, 0, 0, 0.05); padding: 2px 4px; border-radius: 3px; border-left: 2px solid var(--neon-blue); }
        .message-text pre { background-color: rgba(0, 0, 0, 0.05); padding: 12px; border-radius: 5px; overflow-x: auto; margin: 8px 0; position: relative; font-family: 'Courier New', monospace; white-space: pre-wrap; word-break: break-all; border-left: 3px solid var(--neon-blue); box-shadow: inset 0 0 10px rgba(0, 153, 255, 0.05); background-image: linear-gradient(to bottom, rgba(0, 153, 255, 0.03), transparent); }
        .code-preview-btn { display: inline-block; margin-top: 5px; padding: 5px 12px; background-color: var(--tech-grey); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; font-size: 12px; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .code-preview-btn::after { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 153, 255, 0.2), transparent); transition: 0.5s; }
        .code-preview-btn:hover { background-color: var(--tech-light-blue); border-color: var(--neon-blue); transform: translateY(-2px); box-shadow: 0 2px 5px rgba(0, 153, 255, 0.2); }
        .code-preview-btn:hover::after { left: 100%; }
        .code-preview { display: none; margin-top: 10px; padding: 10px; background-color: var(--white); border-radius: var(--border-radius); overflow: auto; border: 1px solid var(--border-color); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1), 0 0 10px rgba(0, 153, 255, 0.1); transition: all 0.3s ease; }
        .code-preview iframe { width: 100%; min-height: 200px; border: none; background-color: white; }
        .code-preview.show { display: block; animation: slide-down 0.3s ease; }
        @keyframes slide-down { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .message-actions { margin-top: 5px; display: flex; gap: 10px; justify-content: flex-end; }
        .message-copy, .message-model { font-size: 12px; color: var(--light-text); cursor: pointer; transition: all 0.3s ease; }
        .message-copy:hover { color: var(--neon-blue); text-shadow: 0 0 3px rgba(0, 195, 255, 0.5); }
        .message-model { font-style: italic; position: relative; }
        .message-model::before { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 1px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); transform: scaleX(0); transition: transform 0.3s ease; }
        .message-model:hover::before { transform: scaleX(1); }
        /* Typing indicator */
        .typing-indicator { display: flex; align-items: center; gap: 8px; color: var(--light-text); padding: 8px 0; }
        .typing-indicator .dots { display: flex; gap: 4px; }
        .typing-indicator .dot { width: 8px; height: 8px; background-color: var(--neon-blue); border-radius: 50%; animation: typing-dot 1.4s infinite ease-in-out; box-shadow: 0 0 5px rgba(0, 195, 255, 0.5); }
        .typing-indicator .dot:nth-child(1) { animation-delay: 0s; }
        .typing-indicator .dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing-dot { 0%, 60%, 100% { transform: translateY(0); opacity: 0.5; } 30% { transform: translateY(-5px); opacity: 1; } }
        /* Input area */
        .input-area { padding: 15px; background-color: var(--white); border-top: 1px solid var(--border-color); display: flex; gap: 10px; align-items: flex-end; position: relative; background-image: linear-gradient(to top, rgba(0, 153, 255, 0.03), transparent); }
        .input-area::before { content: ''; position: absolute; top: 0; left: 15%; right: 15%; height: 1px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); }
        .message-input { flex: 1; padding: 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius); resize: none; height: 50px; max-height: 200px; overflow-y: auto; background-color: var(--white); color: var(--text-color); transition: all 0.3s ease; box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05); background-image: linear-gradient(to bottom, rgba(0, 153, 255, 0.02), transparent); }
        .message-input:focus { outline: none; border-color: var(--neon-blue); box-shadow: 0 0 0 2px rgba(0, 195, 255, 0.1), inset 0 0 10px rgba(0, 153, 255, 0.03); }
        .send-btn { background-color: var(--tech-blue); color: var(--white); border: none; border-radius: var(--border-radius); width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; box-shadow: 0 0 10px rgba(0, 153, 255, 0.2); }
        .send-btn::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, var(--neon-blue), var(--tech-blue)); z-index: -1; opacity: 0; transition: opacity 0.3s ease; }
        .send-btn:hover { background-color: var(--tech-dark-blue); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 153, 255, 0.3); }
        .send-btn:hover::before { opacity: 1; }
        .send-btn:active { transform: translateY(0); }
        .send-btn i { position: relative; z-index: 1; }
        .action-buttons { display: flex; gap: 10px; }
        .clear-btn, .export-btn { background: none; border: none; color: var(--light-text); cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 50%; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .clear-btn:hover, .export-btn:hover { color: var(--neon-blue); transform: scale(1.1); }
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { width: 100%; z-index: 100; }
            body:not(.sidebar-hidden) .main-content { margin-left: 0; }
            .font-size-controls { display: none; }
            .action-buttons { position: absolute; right: 15px; }
            .model-selection { justify-content: flex-start; }
            .message-bubble { max-width: 80%; }
            .dropdown-toggle { max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        }
        /* Particles */
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .particle { position: absolute; width: 3px; height: 3px; background: var(--neon-blue); border-radius: 50%; opacity: 0.3; animation: float 20s infinite linear; }
        @keyframes float { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 10% { opacity: 0.3; } 90% { opacity: 0.3; } 100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; } }
    </style>
</head>
<body class="sidebar-hidden">
    <!-- Sidebar for conversations -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title"><a href="/"><span style="color:#0099ff"><b>Nexus AI Chat</b></span></a></div>
            <div style="display: flex; align-items: center;">
                <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="clear-all-btn" id="clearAllBtn" title="Delete All Chats"><i class="fas fa-trash"></i></button>
            </div>
        </div>
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search conversations...">
            <i class="fas fa-search search-icon"></i>
        </div>
        <button class="new-chat-btn" id="newChatBtn">
            <i class="fas fa-plus"></i>
            <span>New Chat</span>
        </button>
        <style>
            .sci-fi-btn { margin: 1px 15px 15px 15px; padding: 4px; background-color: var(--tech-blue); color: var(--white); border: none; border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: 500; transition: all 0.3s ease; position: relative; overflow: hidden; text-align: center; box-shadow: 0 0 10px rgba(0, 153, 255, 0.2); text-decoration: none; font-size: 14px; }
            .sci-fi-btn:hover { background-color: var(--tech-dark-blue); transform: translateY(-1px); box-shadow: 0 5px 15px rgba(0, 153, 255, 0.3); }
        </style>
        <a href="/" class="sci-fi-btn">
            <i class="fas fa-circle-arrow-left"></i> &nbsp; Back to Home
        </a>
        <div class="chat-list" id="chatList"></div>
    </div>

    <!-- Main content area -->
    <div class="main-content">
        <div class="header">
            <div class="model-selection">
                <button class="sidebar-toggle-btn" id="sidebarToggleBtn"><i class="fas fa-bars"></i></button>
                <div class="dropdown" id="modelDropdown">
                    <button class="dropdown-toggle">
                        <span id="selectedModel">OpenAI GPT-4o-mini</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" id="modelMenu"></div>
                </div>
                <button class="settings-btn" id="settingsBtn" title="Settings"><i class="fas fa-cog"></i></button>
                <div class="font-size-controls">
                    <button class="font-size-btn" id="fontSizeDecreaseBtn" title="Decrease Font Size"><i class="fas fa-font"></i><i class="fas fa-minus" style="font-size: 0.5em; vertical-align: super;"></i></button>
                    <button class="font-size-btn" id="fontSizeIncreaseBtn" title="Increase Font Size"><i class="fas fa-font"></i><i class="fas fa-plus" style="font-size: 0.5em; vertical-align: super;"></i></button>
                </div>
            </div>
            <div class="action-buttons">
                <button class="clear-btn" id="clearChatBtn" title="Clear Conversation"><i class="fas fa-broom"></i></button>
                <button class="export-btn" id="exportChatBtn" title="Export Conversation"><i class="fas fa-download"></i></button>
            </div>
        </div>
        <div class="chat-area" id="chatArea"></div>
        <div class="input-area">
            <textarea class="message-input" id="messageInput" placeholder="Type a message to start chatting..." rows="1"></textarea>
            <button class="send-btn" id="sendBtn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div class="particles" id="particles"></div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Settings</h5>
                <button class="close-modal" id="closeSettingsModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <hr style="margin: 20px 0; border-top: 1px solid var(--border-color);">
                <div class="form-group">
                    <label class="form-label" for="systemPrompt">System Prompt</label>
                    <textarea class="form-control" id="systemPrompt" rows="5" placeholder="Enter a custom system prompt..."></textarea>
                    <div class="prompt-examples">
                        <div class="prompt-example" data-prompt="You are a helpful assistant that provides accurate and concise information.">General AI Assistant</div>
                        <div class="prompt-example" data-prompt="You are a creative writer who helps craft engaging stories and content.">Creative Writer</div>
                        <div class="prompt-example" data-prompt="You are a programming expert who provides clear code examples and explanations.">Code Writing Assistant</div>
                        <div class="prompt-example" data-prompt="You are a language learning tutor who helps with translations and grammar.">Language Tutor</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelSettingsBtn">Cancel</button>
                <button class="btn btn-primary" id="saveSettingsBtn">Save</button>
            </div>
        </div>
    </div>

    <script>
        // API Key
        const API_KEY = 'j50fV4EaGFEnaZ7r';

        // Model data
        const allModels = [
            { name: "openai", description: "OpenAI GPT-4o-mini", group: "OpenAI" },
            { name: "openai-large", description: "OpenAI GPT-4o", group: "OpenAI" },
            { name: "openai-reasoning", description: "OpenAI o1-mini", group: "OpenAI" },
            { name: "qwen-coder", description: "Qwen 2.5 Coder 32B", group: "Qwen" },
            { name: "llama", description: "Llama 3.3 70B", group: "Meta" },
            { name: "mistral", description: "Mistral Nemo", group: "Mistral" },
            { name: "claude", description: "Claude 3.5 Haiku", group: "Anthropic" },
            { name: "gemini", description: "Gemini 2.0 Flash", group: "Google" }
        ];

        // AI avatar
        const aiAvatar = `<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M512 1023.9c-23.4 0-229-14.4-229-512S488.5 0 512 0s228.9 134.1 228.9 512-123.3 511.9-228.9 511.9z m0-968.6c-69.8 0-173.7 121.6-173.7 456.7S442.2 968.5 512 968.5c60 0 173.6-95.5 173.6-456.7S572.1 55.3 512 55.3z" fill="#0099ff"></path><path d="M218.9 854.8c-28.5 0-52.1-3.5-71.4-8.6-43.5-11.7-77.3-35.4-95.3-66.8-11.7-20.5-101.4-207.2 345.3-467.2C652.1 164 799.2 158.1 877.6 179.1c43.3 11.6 76.8 34.9 94.2 65.5 52.7 92-6 269.6-345.2 467.1-191.8 111.7-322 143.2-407.7 143.2z m585.6-629.2c-72.5 0-192.9 25.9-379.3 134.5C123 536 65.3 690.7 100.2 751.8c6.2 10.7 22.3 30.3 61.6 40.9 55.1 14.6 185 17.7 436.9-129 326-189.8 355.1-339.2 325.1-391.8-5.9-10.2-21.5-29-60.5-39.5-14.4-3.8-33.7-6.9-58.7-6.9z" fill="#0099ff"></path></svg>`;
        
        function generateUserAvatar() {
            const colors = ['#FFB900', '#FF8C00', '#F7630C', '#CA5010', '#DA3B01', '#EF6950', '#D13438', '#FF4343', '#E74856', '#E81123'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="36" height="36"><rect width="100" height="100" fill="${randomColor}" /><circle cx="50" cy="35" r="18" fill="white" /><path d="M50 60 C25 60 15 80 15 100 L85 100 C85 80 75 60 50 60 Z" fill="white" /></svg>`;
        }
        const userAvatar = generateUserAvatar();
        
        // App State
        let state = {
            currentModel: allModels[0], systemPrompt: "", conversations: [], currentConversationId: null,
            isAiTyping: false, currentTheme: 'light', chatFontSize: 14, sidebarHidden: true
        };

        // DOM Elements
        const elements = {
            sidebar: document.getElementById('sidebar'), sidebarToggleBtn: document.getElementById('sidebarToggleBtn'),
            modelDropdown: document.getElementById('modelDropdown'), selectedModel: document.getElementById('selectedModel'),
            modelMenu: document.getElementById('modelMenu'), chatArea: document.getElementById('chatArea'), messageInput: document.getElementById('messageInput'),
            sendBtn: document.getElementById('sendBtn'), clearChatBtn: document.getElementById('clearChatBtn'), exportChatBtn: document.getElementById('exportChatBtn'),
            settingsBtn: document.getElementById('settingsBtn'), settingsModal: document.getElementById('settingsModal'),
            closeSettingsModal: document.getElementById('closeSettingsModal'), cancelSettingsBtn: document.getElementById('cancelSettingsBtn'),
            saveSettingsBtn: document.getElementById('saveSettingsBtn'), systemPrompt: document.getElementById('systemPrompt'),
            newChatBtn: document.getElementById('newChatBtn'), chatList: document.getElementById('chatList'),
            clearAllBtn: document.getElementById('clearAllBtn'), themeToggle: document.getElementById('themeToggle'), searchInput: document.getElementById('searchInput'),
            fontSizeIncreaseBtn: document.getElementById('fontSizeIncreaseBtn'), fontSizeDecreaseBtn: document.getElementById('fontSizeDecreaseBtn'),
            particles: document.getElementById('particles')
        };
        
        // Main App Logic
        document.addEventListener('DOMContentLoaded', init);

        function init() {
            loadState();
            setupTheme();
            updateSidebar();
            populateModelDropdown();
            setupEventListeners();
            createNewConversationIfNeeded();
            renderConversationList();
            renderCurrentConversation();
            createParticles();
            updateFontSize();
        }

        function loadState() {
            const savedState = localStorage.getItem('nexusAiChatState');
            if (savedState) {
                const parsedState = JSON.parse(savedState);
                state = { ...state, ...parsedState, isAiTyping: false };
                if (!allModels.find(m => m.name === state.currentModel.name)) {
                    state.currentModel = allModels[0];
                }
            }
        }
        function saveState() { localStorage.setItem('nexusAiChatState', JSON.stringify(state)); }

        function createParticles() {
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.top = Math.random() * 100 + 'vh';
                particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
                elements.particles.appendChild(particle);
            }
        }

        function setupTheme() {
            document.documentElement.setAttribute('data-theme', state.currentTheme);
            elements.themeToggle.innerHTML = state.currentTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        }
        
        function updateSidebar() {
            const body = document.body;
            if (state.sidebarHidden) {
                body.classList.add('sidebar-hidden');
                elements.sidebar.classList.add('hidden');
                elements.sidebarToggleBtn.innerHTML = '<i class="fas fa-bars"></i>';
            } else {
                body.classList.remove('sidebar-hidden');
                elements.sidebar.classList.remove('hidden');
                elements.sidebarToggleBtn.innerHTML = '<i class="fas fa-times"></i>';
            }
        }
        
        function populateModelDropdown() {
            const groupedModels = allModels.reduce((acc, model) => {
                const group = model.group || 'Other';
                if (!acc[group]) acc[group] = [];
                acc[group].push(model);
                return acc;
            }, {});

            elements.modelMenu.innerHTML = '';
            for (const group in groupedModels) {
                const groupHeader = document.createElement('div');
                groupHeader.className = 'dropdown-group';
                groupHeader.textContent = group;
                elements.modelMenu.appendChild(groupHeader);
                groupedModels[group].forEach(model => {
                    const item = document.createElement('div');
                    item.className = 'dropdown-item';
                    item.textContent = model.description;
                    item.dataset.modelName = model.name;
                    item.addEventListener('click', () => {
                        state.currentModel = model;
                        elements.selectedModel.textContent = model.description;
                        elements.modelMenu.classList.remove('show');
                        saveState();
                    });
                    elements.modelMenu.appendChild(item);
                });
            }
            elements.selectedModel.textContent = state.currentModel.description;
        }

        function setupEventListeners() {
            elements.sidebarToggleBtn.addEventListener('click', () => { state.sidebarHidden = !state.sidebarHidden; updateSidebar(); });
            elements.themeToggle.addEventListener('click', () => { state.currentTheme = state.currentTheme === 'light' ? 'dark' : 'light'; setupTheme(); saveState(); });
            elements.messageInput.addEventListener('keydown', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } });
            elements.sendBtn.addEventListener('click', sendMessage);
            elements.newChatBtn.addEventListener('click', createNewConversation);
            elements.clearAllBtn.addEventListener('click', clearAllConversations);
            elements.searchInput.addEventListener('input', () => renderConversationList(elements.searchInput.value.trim().toLowerCase()));
            elements.modelDropdown.querySelector('.dropdown-toggle').addEventListener('click', () => elements.modelMenu.classList.toggle('show'));
            document.addEventListener('click', (e) => { if (!elements.modelDropdown.contains(e.target)) { elements.modelMenu.classList.remove('show'); } });
            elements.clearChatBtn.addEventListener('click', clearCurrentChat);
            elements.exportChatBtn.addEventListener('click', exportChat);
            elements.settingsBtn.addEventListener('click', () => elements.settingsModal.classList.add('show'));
            elements.closeSettingsModal.addEventListener('click', () => elements.settingsModal.classList.remove('show'));
            elements.cancelSettingsBtn.addEventListener('click', () => elements.settingsModal.classList.remove('show'));
            elements.saveSettingsBtn.addEventListener('click', saveSettings);
            elements.fontSizeIncreaseBtn.addEventListener('click', increaseFontSize);
            elements.fontSizeDecreaseBtn.addEventListener('click', decreaseFontSize);
            document.querySelectorAll('.prompt-example').forEach(el => { el.addEventListener('click', () => { elements.systemPrompt.value = el.dataset.prompt; }); });
        }

        async function sendMessage() {
            const userInput = elements.messageInput.value.trim();
            if (!userInput || state.isAiTyping) return;
            const conversation = getCurrentConversation();
            if (!conversation) return;

            if (conversation.messages.length === 0) {
                conversation.title = userInput.substring(0, 30) + (userInput.length > 30 ? '...' : '');
            }

            conversation.messages.push({ role: 'user', content: userInput, timestamp: new Date().toISOString() });
            elements.messageInput.value = '';
            elements.messageInput.style.height = 'auto';
            renderCurrentConversation();
            scrollToBottom();
            addTypingIndicator();

            let messagesForApi = conversation.messages.map(({ role, content }) => ({ role, content }));
            if (state.systemPrompt) {
                messagesForApi.unshift({ role: 'system', content: state.systemPrompt });
            }

            const apiUrl = `https://text.pollinations.ai/${state.currentModel.name}`;
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        messages: messagesForApi,
                        stream: false
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API Error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                const aiResponse = data?.choices?.[0]?.message?.content || "Sorry, I couldn't get a valid response.";
                
                conversation.messages.push({ role: 'assistant', content: aiResponse, model: state.currentModel.description, timestamp: new Date().toISOString() });

            } catch (error) {
                console.error('Error fetching AI response:', error);
                conversation.messages.push({ role: 'assistant', content: `Error: Unable to get a response. ${error.message}` });
            } finally {
                removeTypingIndicator();
                renderCurrentConversation();
                scrollToBottom();
                saveState();
            }
        }
        
        function renderCurrentConversation() {
            const conversation = getCurrentConversation();
            elements.chatArea.innerHTML = '';
            if (!conversation) return;

            conversation.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message message-${message.role || 'ai'}`;
                const escapedContent = message.content.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                messageDiv.innerHTML = `
                    <div class="message-avatar">${message.role === 'user' ? userAvatar : aiAvatar}</div>
                    <div class="message-bubble">
                        <div class="message-text">${escapedContent}</div>
                        ${message.role !== 'user' && message.model ? `<div class="message-actions"><div class="message-model">${message.model}</div></div>` : ''}
                    </div>
                `;
                elements.chatArea.appendChild(messageDiv);
            });
            renderConversationList();
            scrollToBottom();
        }
        
        function renderConversationList(searchTerm = '') {
            elements.chatList.innerHTML = '';
            const filteredConversations = state.conversations.filter(conv => 
                conv.title.toLowerCase().includes(searchTerm)
            );

            filteredConversations.forEach(conversation => {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                if (conversation.id === state.currentConversationId) {
                    chatItem.classList.add('active');
                }
                chatItem.innerHTML = `<div class="chat-item-icon">${aiAvatar}</div><div class="chat-item-title">${conversation.title}</div>`;
                chatItem.addEventListener('click', () => {
                    state.currentConversationId = conversation.id;
                    renderCurrentConversation();
                    saveState();
                    if (window.innerWidth <= 768) {
                        state.sidebarHidden = true;
                        updateSidebar();
                    }
                });
                elements.chatList.appendChild(chatItem);
            });
        }
        
        function addTypingIndicator() {
            if (document.getElementById('typingIndicator')) return;
            state.isAiTyping = true;
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'message message-ai';
            typingDiv.innerHTML = `<div class="message-avatar">${aiAvatar}</div><div class="message-bubble"><div class="typing-indicator"><span>AI is replying</span><div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div></div>`;
            elements.chatArea.appendChild(typingDiv);
            scrollToBottom();
        }
        
        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
            state.isAiTyping = false;
        }

        function createNewConversationIfNeeded() {
            if (state.conversations.length === 0 || !getCurrentConversation()) {
                createNewConversation();
            }
        }
        
        function createNewConversation() {
            const newId = Date.now().toString();
            const newConversation = { id: newId, title: `New Chat`, messages: [] };
            state.conversations.unshift(newConversation);
            state.currentConversationId = newId;
            renderConversationList();
            renderCurrentConversation();
            saveState();
        }

        function getCurrentConversation() {
            return state.conversations.find(conv => conv.id === state.currentConversationId);
        }

        function clearCurrentChat() {
            const conversation = getCurrentConversation();
            if (conversation) {
                conversation.messages = [];
                renderCurrentConversation();
                saveState();
            }
        }

        function exportChat() {
            const conversation = getCurrentConversation();
            if (!conversation || conversation.messages.length === 0) {
                alert('No messages to export.');
                return;
            }
            let markdown = `# ${conversation.title}\n\n`;
            conversation.messages.forEach(message => {
                const role = message.role === 'user' ? 'User' : `AI (${message.model || state.currentModel.description})`;
                markdown += `## ${role}\n\n${message.content}\n\n---\n\n`;
            });
            const blob = new Blob([markdown], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${conversation.title.replace(/ /g, '_')}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function saveSettings() {
            state.systemPrompt = elements.systemPrompt.value;
            saveState();
            elements.settingsModal.classList.remove('show');
        }

        function updateFontSize() {
             document.documentElement.style.setProperty('--chat-font-size', `${state.chatFontSize}px`);
        }
        function increaseFontSize() { if (state.chatFontSize < 24) { state.chatFontSize += 2; updateFontSize(); saveState(); } }
        function decreaseFontSize() { if (state.chatFontSize > 10) { state.chatFontSize -= 2; updateFontSize(); saveState(); } }

        function clearAllConversations() {
            if (confirm('Are you sure you want to delete all conversations? This action cannot be undone.')) {
                state.conversations = [];
                state.currentConversationId = null;
                createNewConversation();
            }
        }
        function scrollToBottom() { elements.chatArea.scrollTop = elements.chatArea.scrollHeight; }

    </script>
</body>
</html>
